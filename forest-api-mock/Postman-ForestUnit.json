{
  "info": {
    "name": "ForestTracking API Updated",
    "_postman_id": "f4a3c5d0-1111-1111-1111-111111111111",
    "description": "Collezione Postman aggiornata per testare le nuove API del server ForestTracking (Tree, WoodLog, SawnTimber, Merkle root unificata, Blockchain mock).",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Get Forest Units",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{account}}",
          "host": ["{{API_URL}}"],
          "path": ["api","forest-units","{{account}}"]
        }
      }
    },
    {
      "name": "Create Forest Unit",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"forestUnitId\": \"{{forestUnitKey}}\",\n  \"accountId\": \"{{account}}\"\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units",
          "host": ["{{API_URL}}"],
          "path": ["api","forest-units"]
        }
      }
    },
    {
      "name": "Add Tree",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"epc\": \"{{treeEpc}}\",\n  \"firstReadingTime\": \"{{tree.firstReading}}\",\n  \"treeType\": { \"specie\": \"{{tree.treeType}}\" },\n  \"notes\": \"Nuovo albero\"\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{forestUnitKey}}/tree",
          "host": ["{{API_URL}}"],
          "path": ["api","forest-units","{{forestUnitKey}}","tree"]
        }
      }
    },
    {
      "name": "Add WoodLog",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"epc\": \"{{woodLogEpc}}\",\n  \"firstReadingTime\": \"{{woodLog.firstReading}}\",\n  \"parentTree\": \"{{treeEpc}}\",\n  \"observations\": []\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{forestUnitKey}}/woodlog",
          "host": ["{{API_URL}}"],
          "path": ["api","forest-units","{{forestUnitKey}}","woodlog"]
        }
      }
    },
    {
      "name": "Add Sawn Timber",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"epc\": \"{{sawnTimber.epc}}\",\n  \"firstReadingTime\": \"{{sawnTimber.firstReading}}\",\n  \"parentWoodLog\": \"{{woodLogEpc}}\",\n  \"observations\": []\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{forestUnitKey}}/sawntimber",
          "host": ["{{API_URL}}"],
          "path": ["api","forest-units","{{forestUnitKey}}","sawntimber"]
        }
      }
    },
    {
      "name": "Generate Unified Merkle Root",
      "request": {
        "method": "POST",
        "header": [
          { "key": "Content-Type", "value": "application/json" }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"forestUnitId\": \"{{forestUnitKey}}\"\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/merkle-root-unified",
          "host": ["{{API_URL}}"],
          "path": ["api","merkle-root-unified"]
        }
      }
    },
    {
      "name": "Write Blockchain (mock)",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{}"
        },
        "url": {
          "raw": "{{API_URL}}/api/write-blockchain/{{forestUnitKey}}",
          "host": ["{{API_URL}}"],
          "path": ["api","write-blockchain","{{forestUnitKey}}"]
        }
      }
    }
  ],
  "variable": [
    { "key": "API_URL", "value": "http://localhost:3000" },
    { "key": "account", "value": "lorenzo" },
    { "key": "forestUnitKey", "value": "unit-1758886025815" },
    { "key": "treeEpc", "value": "TREE123" },
    { "key": "woodLogEpc", "value": "WOODLOG123" },
    { "key": "sawnTimber.epc", "value": "SAWNTIMBER123" },
    { "key": "tree.firstReading", "value": "2025-09-26T00:00:00.000Z" },
    { "key": "tree.treeType", "value": "DOUGLASFIR" },
    { "key": "woodLog.firstReading", "value": "2025-09-26T00:00:00.000Z" },
    { "key": "sawnTimber.firstReading", "value": "2025-09-26T00:00:00.000Z" }
  ]
}