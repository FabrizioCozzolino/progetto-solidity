{
  "info": {
    "name": "ForestTracking API Coerente",
    "_postman_id": "12345678-0000-0000-0000-000000000000",
    "description": "Collezione Postman aggiornata per testare Trees, WoodLogs, SawnTimbers e Merkle root unificata",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Add Forest Unit",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "[\n  {\n    \"forestUnitId\": \"FU001\",\n    \"accountId\": \"lorenzo\",\n    \"trees\": {\n      \"TREE123\": {\n        \"epc\": \"TREE123\",\n        \"firstReadingTime\": \"2025-09-26T00:00:00.000Z\",\n        \"treeType\": {\"specie\": \"DOUGLASFIR\"},\n        \"notes\": \"Nuovo albero\",\n        \"observations\": [{\"phenomenonName\": \"Crescita\", \"quantity\": 5, \"unit\": {\"unitName\": \"cm\"}}],\n        \"woodLogs\": {\n          \"WOODLOG123\": {\n            \"epc\": \"WOODLOG123\",\n            \"firstReadingTime\": \"2025-09-26T00:00:00.000Z\",\n            \"parentTree\": \"TREE123\",\n            \"observations\": [{\"phenomenonName\": \"Taglio\", \"quantity\": 1, \"unit\": {\"unitName\": \"pezzo\"}}],\n            \"sawnTimbers\": {\n              \"SAWNTIMBER123\": {\n                \"epc\": \"SAWNTIMBER123\",\n                \"firstReadingTime\": \"2025-09-26T00:00:00.000Z\",\n                \"parentWoodLog\": \"WOODLOG123\",\n                \"observations\": [{\"phenomenonName\": \"Sezionatura\", \"quantity\": 2, \"unit\": {\"unitName\": \"pezzi\"}}]\n              }\n            }\n          }\n        }\n      }\n    },\n    \"woodLogs\": {\n      \"WOODLOG123\": {\n        \"epc\": \"WOODLOG123\",\n        \"firstReadingTime\": \"2025-09-26T00:00:00.000Z\",\n        \"parentTree\": \"TREE123\",\n        \"observations\": [{\"phenomenonName\": \"Taglio\", \"quantity\": 1, \"unit\": {\"unitName\": \"pezzo\"}}],\n        \"sawnTimbers\": {\n          \"SAWNTIMBER123\": {\n            \"epc\": \"SAWNTIMBER123\",\n            \"firstReadingTime\": \"2025-09-26T00:00:00.000Z\",\n            \"parentWoodLog\": \"WOODLOG123\",\n            \"observations\": [{\"phenomenonName\": \"Sezionatura\", \"quantity\": 2, \"unit\": {\"unitName\": \"pezzi\"}}]\n          }\n        }\n      }\n    },\n    \"sawnTimbers\": {\n      \"SAWNTIMBER123\": {\n        \"epc\": \"SAWNTIMBER123\",\n        \"firstReadingTime\": \"2025-09-26T00:00:00.000Z\",\n        \"parentWoodLog\": \"WOODLOG123\",\n        \"observations\": [{\"phenomenonName\": \"Sezionatura\", \"quantity\": 2, \"unit\": {\"unitName\": \"pezzi\"}}]\n      }\n    }\n  }\n]"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/addForestUnit",
          "host": ["{{API_URL}}"],
          "path": ["api", "forest-units", "addForestUnit"]
        }
      }
    },
    {
      "name": "Get Forest Units",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{account}}",
          "host": ["{{API_URL}}"],
          "path": ["api", "forest-units", "{{account}}"]
        }
      }
    },
    {
      "name": "Get Full Forest Unit",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{API_URL}}/api/forest-units/full/{{forestUnitKey}}",
          "host": ["{{API_URL}}"],
          "path": ["api", "forest-units", "full", "{{forestUnitKey}}"]
        }
      }
    },
    {
      "name": "Add Tree",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"epc\": \"{{treeEpc}}\",\n  \"firstReadingTime\": \"{{firstReading}}\",\n  \"treeType\": { \"specie\": \"{{treeType}}\" },\n  \"notes\": \"Nuovo albero\",\n  \"observations\": [\n    {\"phenomenonName\": \"Crescita\", \"quantity\": 5, \"unit\": {\"unitName\": \"cm\"}}\n  ]\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{forestUnitKey}}/tree",
          "host": ["{{API_URL}}"],
          "path": ["api", "forest-units", "{{forestUnitKey}}", "tree"]
        }
      }
    },
    {
      "name": "Add WoodLog",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"epc\": \"{{woodLogEpc}}\",\n  \"firstReadingTime\": \"{{firstReading}}\",\n  \"parentTree\": \"{{treeEpc}}\",\n  \"observations\": [\n    {\"phenomenonName\": \"Taglio\", \"quantity\": 1, \"unit\": {\"unitName\": \"pezzo\"}}\n  ]\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{forestUnitKey}}/woodlog",
          "host": ["{{API_URL}}"],
          "path": ["api", "forest-units", "{{forestUnitKey}}", "woodlog"]
        }
      }
    },
    {
      "name": "Add Sawn Timber",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"epc\": \"{{sawnTimberEpc}}\",\n  \"firstReadingTime\": \"{{firstReading}}\",\n  \"parentWoodLog\": \"{{woodLogEpc}}\",\n  \"observations\": [\n    {\"phenomenonName\": \"Sezionatura\", \"quantity\": 2, \"unit\": {\"unitName\": \"pezzi\"}}\n  ]\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/{{forestUnitKey}}/sawntimber",
          "host": ["{{API_URL}}"],
          "path": ["api", "forest-units", "{{forestUnitKey}}", "sawntimber"]
        }
      }
    },
    {
      "name": "Unified Forest Unit Operation",
      "request": {
        "method": "POST",
        "header": [{ "key": "Content-Type", "value": "application/json" }],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"forestUnitId\": \"{{forestUnitKey}}\",\n  \"accountId\": \"{{account}}\"\n}"
        },
        "url": {
          "raw": "{{API_URL}}/api/forest-units/unified",
          "host": ["{{API_URL}}"],
          "path": ["api", "forest-units", "unified"]
        }
      }
    },
    {
  "name": "Verify Merkle Root from IPFS",
  "request": {
    "method": "POST",
    "header": [{ "key": "Content-Type", "value": "application/json" }],
    "body": {
      "mode": "raw",
      "raw": "{\n  \"forestUnitId\": \"{{forestUnitKey}}\"\n}"
    },
    "url": {
      "raw": "{{API_URL}}/api/forest-units/verify",
      "host": ["{{API_URL}}"],
      "path": ["api", "forest-units", "verify"]
    }
  }
},
{
  "name": "Check Blockchain Integrity",
  "request": {
    "method": "GET",
    "header": [],
    "url": {
      "raw": "{{API_URL}}/api/check-integrity/{{forestUnitKey}}",
      "host": ["{{API_URL}}"],
      "path": ["api", "check-integrity", "{{forestUnitKey}}"]
    }
  },
  "response": []
}
  ],
  "variable": [
    { "key": "API_URL", "value": "http://localhost:3000" },
    { "key": "account", "value": "lorenzo" },
    { "key": "forestUnitKey", "value": "FU001" },
    { "key": "treeEpc", "value": "TREE123" },
    { "key": "woodLogEpc", "value": "WOODLOG123" },
    { "key": "sawnTimberEpc", "value": "SAWNTIMBER123" },
    { "key": "firstReading", "value": "2025-09-26T00:00:00.000Z" },
    { "key": "treeType", "value": "DOUGLASFIR" }
  ]
}